{% extends 'base.html.twig' %}

{% block title %}Green Village
{% endblock %}

{% block body %}

<style>

	.trans3d {
		transform-style: preserve-3d;
		transform: translate3d(0, 0, 0);
	}

	.container-carousel {
		padding-top: 100px ;
		justify-content: center;
		align-items: center;
		justify-items: center;
		width: 270px;
		height: 300px;
		
		margin-top: 10px;
		margin-bottom: 300px;
   
		position: relative;
transform-origin: center center;
		perspective: 2000px;
		
		transform-style: preserve-3d;
		transition: transform 1.5s;



	}

	.carousel {
		height: 100%;
		width: 100%;
		position: absolute;
		transform-style: preserve-3d;
		transition: transform 1.5s;
        transform-origin: center center;
	}

	.item {
		display: block;
		position: absolute;
		width: 250px;
		height: 300px;
		opacity: 0.95;
		border-radius: 10px;
overflow : hidden;


	}

	.item .cards {
		justify-content: center;
		align-items: center;
		
		border-radius: 15px;
		cursor: pointer;
		background-color: transparent;
		position: relative;
	
	}

	.item img {
		height: 100%;
		width: 100%;


	}


	.item h2 {
		z-index: 1;
		position: absolute;
		justify-content: center;
        color: #ebd7b5;
		font-size: 4vh;
		text-shadow: -1px -1px 10px rgba(0, 0, 0, 0.9);
		font-weight: 700;
		overflow : hidden;
		margin-left: 30px;



	}

	h5 {
		color: rgb(154, 146, 77);
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		font-size: 18px;
		text-shadow: 4px solid #FFF;
font-weight: 600;

	}

	.next,
	.prev {
		color: #444;
		position: absolute;
		top: 1300px;
		padding-bottom: 15px;
	
		padding: 0.5em 2em;
		cursor: pointer;
        background: #a5969662;
		max-height: 40px;
		border-radius: 5px;
		border-top: 1px solid #FFF;
		box-shadow: -1px 3px 0 #999;
		transition: box-shadow 0.1s, top 0.1s;
	}

	.next:hover,
	.prev:hover {
		color: #000;
		top: 1300px;
	}

	.next:active,
	.prev:active {
		top: 1300px;
box-shadow: 1px 0 3px 1px #88a9b6;

	}

	.next {
		right: 5.1em;
	}

	.prev {
		left: 5em;
	}

	@media (max-width: 768px) {
        .container-carousel {
         width: 220px;
         height: 250px;
		padding: auto center;
		margin-top: 15px;
		margin-bottom: 300px;
		position: relative;
	   perspective: 200;
		transform-style: preserve-3d;
		transition: transform 1.5s;
		justify-content: center;
		justify-items: center;
		align-items: center;
            }

	.item {
display: block;
		position: absolute;
		width:200px;
		height: 250px;
justify-content: center;
		align-items: center;
		opacity: 0.95;
		border-radius: 10px;
justify-items: center;

		}

	.item .cards {
	justify-content: center;
		align-items: center;
		
		border-radius: 15px;
		cursor: pointer;
		background-color: transparent;
		
	}
            
			.item img {

		height: 100%;
		width: 100%;
	}
	
            .item h2 {
	  height: 100px;
		width: 100px;
        font-size: 3.8vw;
		text-shadow: -1px -1px 9px rgba(0, 0, 0, 0.9);
		font-weight: 750;
       color: #ebd7b5;
		align-items: center;
		margin-left: 25px;
            }

            h5 {
                font-size: 2.6vw;
				text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.25);
		font-weight: 550;
		margin: 0 auto;
            }

    .next, .prev {
		top: 1250px;
		position: absolute;
	     height: 4vh;
		 width: 18vw;
		 margin-bottom: 50px;
		 margin: 0 auto;
padding: 0.6em 1.3em;

		
            }
	.next:hover,
	.prev:hover {
		color: #000;
		top: 1250px;
padding: 0.5em 2em;

		height: 4vh;
		width: 18vw;


	}

	.next:active,
	.prev:active {
		top: 1250px;
padding: 0.5em 2em;

		height: 4vh;
		width: 18vw;
		box-shadow: 0 0 0 1px #999;


	}
        }

        @media (max-width: 480px), 
        (min-width: 479px) {
 .container-carousel {
        width: 125px;
        height: 200px;
		padding: 5px 0;
		margin: 0 auto;
perspective: 500;
		top: 250px;
		margin-bottom: 300px;
		margin-left: none;
		margin-right: none;
		position: relative;
		transform-style: preserve-3d;
		transition: transform 1.5s;
		justify-content: center;
         }

	.item {
display: block;
		position: absolute;
		width: 125px;
		height: 200px;
overflow : hidden;

		opacity: 0.95;
		border-radius: 10px;
		}

			.item .cards {
					justify-content: center;
		align-items: center;
		
		border-radius: 15px;
		cursor: pointer;
		background-color: transparent;
		
		

			}
			.item img {
		height: 100%;
		width: 100%;
	}
            .item h2 {
                font-size: 4.5vw;
				text-shadow: -1px -1px 9px rgba(0, 0, 0, 0.9);
		font-weight: 750;
            }

.next, .prev h5 {

                font-size: 2vw;
				text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);
		font-weight: 750;
            }

            .next, .prev {
				margin: auto;
                top: 65%;
				height: 4vh;
		        width: 18vw;
margin-bottom: 50px;
justify-content: center;

            }
				.next:hover,
	.prev:hover {
padding: 0 2px;

		color: #000;
		top: 65%;
		height: 4vh;
		        width: 18vw;
margin-bottom: 50px;

	}

	.next:active,
	.prev:active {
padding: 0 2px;

		top: 65%;
		height: 4vh;
	    width: 18vw;
		box-shadow: 0 0 1px 1px #999;
margin-bottom: 50px;

	}
        }
</style>

<div class="container mx-auto mt-12 p-6 bg-gray-100 shadow-lg rounded-xl">
    <h1 class="text-4xl font-bold text-gray-800 text-center mb-8">Rubriques</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for rubric in rubrics %}
            <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105">
                <div class="mb-4">
                    <h2 class="text-lg font-semibold text-gray-700 uppercase">{{ rubric.label }}</h2>
                    <p class="text-sm text-gray-500">ID:
                        {{ rubric.id }}</p>

                    {% if rubric.image %}
                        <img src="{{ rubric.image }}" alt="{{ rubric.label }}" class="w-full h-32 object-cover rounded-md mt-3">
                    {% endif %}

                    <p class="text-gray-600 mt-3">{{ rubric.content }}</p>
                </div>
<main class="myH2">

<section class="myP">

<div id="contentContainer" class="trans3d">

		<section id="carouselContainer" class="trans3d " >
			<div class="container container-carousel  ">


				<div id="carouselItem" class="carousel ">

                    {% if rubric.rubrics %}

{% set rotate_angles = [0, 60, 120, 180, 240, 300] %}

					{# {% for rubrics in rubric %} #}
						{% set index = loop.index0 %}
						{% set angle = rotate_angles[index % rotate_angles|length] %}
<div class="item cards carouselItem" style="transform: rotateY(angle)deg translateZ();">



<a href="{{ path('app_product') }}">
<h2 class="item">{{ rubric.label }}</h2></a>


							<img  src="{{ asset(rubric.image) }}" alt="" style="object-fit: cover;">

						</div>
					
				</div>
			</div>
		</div>
        {% endif %}
       
	</div>
<div class="next ">
	<h5>Suivant</h5>
</div>

	<div class="prev  ">
		<h5>Précédent</h5>
	</div>
	
	 {% endfor %}
</section></div></section></main>

{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{# <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>  #}
<script>
var w,
container,
carousel,
item,
itemLength,
rY,
radius;
var rotationY = 0;

$(document).ready(init);

function init() {
w = $(window);
container = $('#contentContainer');
carousel = $('#carouselContainer');
item = $('.carouselItem');

itemLength = item.length;
rY = 360 / itemLength;
radius = Math.round((170) / Math.tan(Math.PI / itemLength)); 

// set container 3d props
               /*itemLength = item.length;
                rY = 360 / itemLength;
                radius = Math.round((container.width() / 2) / Math.tan(Math.PI / itemLength));

                // set container 3d props
               
                gsap.set(container, {perspective: 1000});
                gsap.set(carousel, {z: -(radius), transformOrigin: "center center " + -radius + "px"});*/



// create carousel item props
item.each(function (i) {
var $item = $(this);
gsap.set($item, {
rotationY: rY * i,
z: radius,
transformOrigin: "50% 50% " + - radius + "px"
});
});

// Initial animation
gsap.fromTo(item, {
autoAlpha: 0,
scale: 0
}, {
duration: 1,
autoAlpha: 1,
scale: 1,
stagger: 0,
ease: "expo.inOut"
});
}

// Rotation functions
var currdeg = 0;

$(".next").on("click", {
d: "n"
}, rotate);
$(".prev").on("click", {
d: "p"
}, rotate);

function rotate(e) {
if (e.data.d == "n") {
currdeg = currdeg + rY;
}
if (e.data.d == "p") {
currdeg = currdeg - rY;
}
gsap.to(".carousel", {
duration: 1,
rotationY: currdeg,
ease: "expo.inOut"
});
}

</script>

 {# <div class="container-plats position-relative">
	
		{% for plat in plats %}
			<div class="col-12 col-md-6 col-sm-12  p-0 m-0 d-flex justify-content-center">
				<div class="card">
<h3 class="justify-items-center">{{plat.libelle}}</h3>

					<img class="img-card" src="{{ asset(plat.image) }}" alt="Image du plat">
					<div class="card-body">
						<p class="description">{{ plat.description }}</p>
						<h5>{{ plat.prix }}
							€</h5>
<button id"app">
	<span class="text">Commander</span>
	<span class="shimmer"></span>
</button>

						</div>
					</div>
				</div>
			</div>#}
		{# {% endfor %}  #}
</div> 


{% endblock %}

{% endblock %}